<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teacher Matt's Dad Jokes</title>
  <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/4492/4492853.png" />
  <link rel="alternate icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/128/4492/4492853.ico" />
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 100%;
      margin: 0 auto;
      padding: 1rem;
      background-color: #f4f4f4;
      box-sizing: border-box;
    }
    h1 {
      text-align: center;
      color: #333;
      font-size: clamp(1.2rem, 5vw, 1.5rem);
      font-family: "Comic Sans MS", Arial, sans-serif;
      margin: 0.5rem 0;
    }
    .flashcard {
      background: white;
      border: 2px solid #ccc;
      border-radius: 12px;
      width: min(95vw, 340px);
      height: auto;
      min-height: 300px;
      margin: 1rem auto;
      padding: 1rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      cursor: pointer;
      text-align: center;
      display: none;
      flex-direction: column;
      justify-content: center;
      position: relative;
      box-sizing: border-box;
      touch-action: manipulation;
    }
    .flashcard.active {
      display: flex;
    }
    .flashcard-front, .flashcard-back {
      display: none;
    }
    .flashcard-front.active, .flashcard-back.active {
      display: block;
    }
    .flashcard-front {
      font-weight: bold;
      color: #2c3e50;
      font-size: clamp(1rem, 4.5vw, 1.25rem);
      padding: 0.5rem;
      overflow-wrap: break-word;
    }
    .flashcard-back .joke-setup {
      font-size: clamp(0.9rem, 4vw, 1.1rem);
      color: #2c3e50;
      margin-bottom: 0.5rem;
      padding: 0.5rem;
      overflow-wrap: break-word;
    }
    .flashcard-back .punchline {
      font-size: clamp(1rem, 4.5vw, 1.25rem);
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 0.5rem;
      padding: 0.5rem;
      overflow-wrap: break-word;
    }
    .flashcard-back hr {
      border: 1px solid #ccc;
      margin: 0.5rem 0;
    }
    .flashcard-back .grammar-lesson {
      font-size: clamp(0.8rem, 3.5vw, 1rem);
      color: #34495e;
      padding: 0.5rem;
      overflow-y: visible;
    }
    .grammar-noun { color: #00008B; font-weight: bold; }
    .grammar-verb { color: #FF0000; font-weight: bold; }
    .grammar-adjective { color: #006400; }
    .grammar-adverb { color: #FF7F50; }
    .grammar-article { color: #FFD700; }
    .grammar-preposition { color: #90EE90; }
    .grammar-conjunction { color: #4A4A4A; }
    .grammar-pronoun { color: #4682B4; }
    .grammar-key {
      font-size: clamp(0.8rem, 3.5vw, 1rem);
      color: #7f8c8d;
      text-align: center;
      margin: 1rem auto;
      width: min(95vw, 340px);
      border-top: 1px solid #ccc;
      padding-top: 0.5rem;
    }
    .navigation {
      text-align: center;
      margin-top: 1rem;
    }
    .nav-icon {
      width: clamp(2rem, 8vw, 2.5rem);
      height: clamp(2rem, 8vw, 2.5rem);
      margin: 0 0.75rem;
      vertical-align: middle;
      touch-action: manipulation;
    }
    .nav-icon.disabled {
      opacity: 0.5;
      pointer-events: none;
    }
    .speech-message {
      text-align: center;
      color: #e74c3c;
      font-size: clamp(0.8rem, 3.5vw, 1rem);
      margin: 0.5rem auto;
      width: min(95vw, 340px);
    }
    .start-button, .continue-button {
      display: block;
      margin: 0.75rem auto;
      padding: 0.5rem 1.5rem;
      font-size: clamp(0.9rem, 4vw, 1.1rem);
      background-color: #2c3e50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      touch-action: manipulation;
    }
    .continue-button {
      display: none;
    }
    .start-button:hover, .continue-button:hover {
      background-color: #34495e;
    }
    @media (max-width: 768px) {
      body {
        padding: 0.5rem;
      }
      .flashcard {
        width: min(95vw, 320px);
        min-height: 280px;
        padding: 0.75rem;
      }
      .flashcard-front {
        font-size: clamp(0.9rem, 4.5vw, 1.1rem);
      }
      .flashcard-back .joke-setup {
        font-size: clamp(0.8rem, 4vw, 1rem);
      }
      .flashcard-back .punchline {
        font-size: clamp(0.9rem, 4.5vw, 1.1rem);
      }
      .flashcard-back .grammar-lesson {
        font-size: clamp(0.7rem, 3.5vw, 0.9rem);
      }
      .grammar-key {
        font-size: clamp(0.7rem, 3.5vw, 0.9rem);
        width: min(95vw, 320px);
      }
      .nav-icon {
        width: clamp(1.8rem, 7vw, 2.2rem);
        height: clamp(1.8rem, 7vw, 2.2rem);
      }
      .start-button, .continue-button {
        padding: 0.5rem 1.25rem;
        font-size: clamp(0.8rem, 4vw, 1rem);
      }
    }
    .flashcard:focus {
      outline: 2px solid #2c3e50;
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <h1>Teacher Matt's Dad Jokes</h1>
  <button class="start-button" onclick="startJoke()">Start Joke</button>
  <button class="continue-button" onclick="toggleCard(document.querySelector('.flashcard.active'))">Continue</button>
  <div class="flashcard active" role="button" aria-expanded="false" aria-label="Interactive dad joke flashcard 1" tabindex="0" onclick="toggleCard(this)" onkeydown="handleKeydown(event)" ontouchstart="toggleCard(this)">
    <div class="flashcard-front active">
      Why don’t <span class="grammar-noun">eggs</span> <span class="grammar-verb">tell</span> <span class="grammar-noun">jokes</span>?
    </div>
    <div class="flashcard-back">
      <div class="joke-setup">Why don’t <span class="grammar-noun">eggs</span> <span class="grammar-verb">tell</span> <span class="grammar-noun">jokes</span>?</div>
      <div class="punchline"><span class="grammar-pronoun">They</span>’d <span class="grammar-verb">crack</span> each <span class="grammar-pronoun">other</span> <span class="grammar-adverb">up</span>!</div>
      <hr>
      <div class="grammar-lesson">
        <strong>Joke Explanation:</strong> “Crack” is a play on words—eggs crack when they break, and it also means laughing a lot.<br>
        <hr>
        <strong>Grammar Lesson:</strong><br>
        - "<span class="grammar-pronoun">they/other</span>": <span class="grammar-pronoun">pronouns</span> stand in for <span class="grammar-noun">nouns</span>.<br>
        - "<span class="grammar-verb">crack</span>": <span class="grammar-verb">verb</span> shows action.<br>
        - "<span class="grammar-adverb">up</span>": <span class="grammar-adverb">adverb</span> adds to the <span class="grammar-verb">verb</span>.
      </div>
    </div>
  </div>
  <div class="flashcard" role="button" aria-expanded="false" aria-label="Interactive dad joke flashcard 2" tabindex="0" onclick="toggleCard(this)" onkeydown="handleKeydown(event)" ontouchstart="toggleCard(this)">
    <div class="flashcard-front active">
      Why did <span class="grammar-article">the</span> <span class="grammar-noun">tomato</span> <span class="grammar-verb">turn</span> red?
    </div>
    <div class="flashcard-back">
      <div class="joke-setup">Why did <span class="grammar-article">the</span> <span class="grammar-noun">tomato</span> <span class="grammar-verb">turn</span> red?</div>
      <div class="punchline">Because <span class="grammar-pronoun">it</span> <span class="grammar-verb">saw</span> <span class="grammar-article">the</span> <span class="grammar-noun">salad</span> <span class="grammar-noun">dressing</span>!</div>
      <hr>
      <div class="grammar-lesson">
        <strong>Joke Explanation:</strong> “Dressing” is a pun—it means salad dressing and getting dressed, like the tomato’s blushing.<br>
        <hr>
        <strong>Grammar Lesson:</strong><br>
        - "<span class="grammar-pronoun">it</span>": <span class="grammar-pronoun">pronoun</span> stands in for a <span class="grammar-noun">noun</span>.<br>
        - "<span class="grammar-verb">saw</span>": <span class="grammar-verb">verb</span> shows action.<br>
        - "<span class="grammar-article">the</span>": <span class="grammar-article">article</span> introduces a <span class="grammar-noun">noun</span>.<br>
        - "<span class="grammar-noun">salad/dressing</span>": <span class="grammar-noun">nouns</span> name things.
      </div>
    </div>
  </div>
  <div class="flashcard" role="button" aria-expanded="false" aria-label="Interactive dad joke flashcard 3" tabindex="0" onclick="toggleCard(this)" onkeydown="handleKeydown(event)" ontouchstart="toggleCard(this)">
    <div class="flashcard-front active">
      What do <span class="grammar-pronoun">you</span> <span class="grammar-verb">call</span> <span class="grammar-article">a</span> <span class="grammar-noun">bear</span> with no <span class="grammar-noun">teeth</span>?
    </div>
    <div class="flashcard-back">
      <div class="joke-setup">What do <span class="grammar-pronoun">you</span> <span class="grammar-verb">call</span> <span class="grammar-article">a</span> <span class="grammar-noun">bear</span> with no <span class="grammar-noun">teeth</span>?</div>
      <div class="punchline"><span class="grammar-article">A</span> gummy <span class="grammar-noun">bear</span>!</div>
      <hr>
      <div class="grammar-lesson">
        <strong>Joke Explanation:</strong> “Gummy” means both having no teeth and the gummy bear candy.<br>
        <hr>
        <strong>Grammar Lesson:</strong><br>
        - "<span class="grammar-article">a</span>": <span class="grammar-article">article</span> introduces a <span class="grammar-noun">noun</span>.<br>
        - "<span class="grammar-noun">bear</span>": <span class="grammar-noun">noun</span> names a thing.
      </div>
    </div>
  </div>
  <div class="flashcard" role="button" aria-expanded="false" aria-label="Interactive dad joke flashcard 4" tabindex="0" onclick="toggleCard(this)" onkeydown="handleKeydown(event)" ontouchstart="toggleCard(this)">
    <div class="flashcard-front active">
      Why did <span class="grammar-article">the</span> <span class="grammar-noun">bicycle</span> <span class="grammar-verb">fall</span> over?
    </div>
    <div class="flashcard-back">
      <div class="joke-setup">Why did <span class="grammar-article">the</span> <span class="grammar-noun">bicycle</span> <span class="grammar-verb">fall</span> over?</div>
      <div class="punchline"><span class="grammar-pronoun">It</span> <span class="grammar-verb">was</span> <span class="grammar-adjective">two-tired</span>!</div>
      <hr>
      <div class="grammar-lesson">
        <strong>Joke Explanation:</strong> “Tired” is a pun for being exhausted and having tires.<br>
        <hr>
        <strong>Grammar Lesson:</strong><br>
        - "<span class="grammar-pronoun">it</span>": <span class="grammar-pronoun">pronoun</span> stands in for a <span class="grammar-noun">noun</span>.<br>
        - "<span class="grammar-verb">was</span>": <span class="grammar-verb">verb</span> shows a state.<br>
        - "<span class="grammar-adjective">two-tired</span>": <span class="grammar-adjective">adjective</span> describes a <span class="grammar-noun">noun</span>.
      </div>
    </div>
  </div>
  <div class="flashcard" role="button" aria-expanded="false" aria-label="Interactive dad joke flashcard 5" tabindex="0" onclick="toggleCard(this)" onkeydown="handleKeydown(event)" ontouchstart="toggleCard(this)">
    <div class="flashcard-front active">
      How do <span class="grammar-pronoun">you</span> <span class="grammar-verb">organize</span> <span class="grammar-article">a</span> space <span class="grammar-noun">party</span>?
    </div>
    <div class="flashcard-back">
      <div class="joke-setup">How do <span class="grammar-pronoun">you</span> <span class="grammar-verb">organize</span> <span class="grammar-article">a</span> space <span class="grammar-noun">party</span>?</div>
      <div class="punchline"><span class="grammar-pronoun">You</span> <span class="grammar-verb">plan</span>-<span class="grammar-noun">it</span>!</div>
      <hr>
      <div class="grammar-lesson">
        <strong>Joke Explanation:</strong> “Planet” sounds like “plan it,” tying to a space theme.<br>
        <hr>
        <strong>Grammar Lesson:</strong><br>
        - "<span class="grammar-pronoun">you</span>": <span class="grammar-pronoun">pronoun</span> as the subject.<br>
        - "<span class="grammar-verb">plan</span>": <span class="grammar-verb">verb</span> shows action.<br>
        - "<span class="grammar-noun">it</span>": <span class="grammar-noun">noun</span>, part of the pun “planet.”
      </div>
    </div>
  </div>
  <div class="grammar-key">
    <strong>Grammar Key:</strong> <span class="grammar-noun">Nouns</span>, <span class="grammar-verb">Verbs</span>, <span class="grammar-adjective">Adjectives</span>, <span class="grammar-adverb">Adverbs</span>, <span class="grammar-article">Articles</span>, <span class="grammar-preposition">Prepositions</span>, <span class="grammar-conjunction">Conjunctions</span>, <span class="grammar-pronoun">Pronouns</span>
  </div>
  <div class="navigation">
    <button class="nav-button" id="prev-button" disabled aria-label="Go to previous flashcard" onclick="navigateCard('prev')">
      <img src="https://cdn-icons-png.flaticon.com/512/271/271220.png" alt="Go to previous flashcard" class="nav-icon">
    </button>
    <button class="nav-button" id="next-button" aria-label="Go to next flashcard" onclick="navigateCard('next')">
      <img src="https://cdn-icons-png.flaticon.com/512/271/271228.png" alt="Go to next flashcard" class="nav-icon">
    </button>
  </div>
  <script>
    let currentCardIndex = 0;
    const cards = document.querySelectorAll('.flashcard');

    function getBritishVoice() {
      const voices = window.speechSynthesis.getVoices();
      return voices.find(voice => voice.lang === 'en-GB') || voices.find(voice => voice.lang === 'en-US');
    }

    function updateCardDisplay() {
      cards.forEach((card, index) => {
        card.classList.toggle('active', index === currentCardIndex);
        if (index === currentCardIndex) {
          card.querySelector('.flashcard-front').classList.add('active');
          card.querySelector('.flashcard-back').classList.remove('active');
          card.setAttribute('aria-expanded', 'false');
        }
      });
      document.querySelector('.start-button').style.display = 'block';
      document.querySelector('.continue-button').style.display = 'none';
      document.querySelector('#prev-button').disabled = currentCardIndex === 0;
      document.querySelector('#next-button').disabled = currentCardIndex === cards.length - 1;
      const prevIcon = document.querySelector('#prev-button .nav-icon');
      const nextIcon = document.querySelector('#next-button .nav-icon');
      prevIcon.classList.toggle('disabled', currentCardIndex === 0);
      nextIcon.classList.toggle('disabled', currentCardIndex === cards.length - 1);
      if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();
      }
      adjustFontSize();
      const message = document.querySelector('.speech-message');
      if (message) message.remove();
    }

    function navigateCard(direction) {
      if (direction === 'next' && currentCardIndex < cards.length - 1) {
        currentCardIndex++;
      } else if (direction === 'prev' && currentCardIndex > 0) {
        currentCardIndex--;
      }
      updateCardDisplay();
    }

    function startJoke() {
      if ('speechSynthesis' in window) {
        const front = document.querySelector('.flashcard.active .flashcard-front');
        const utterance = new SpeechSynthesisUtterance(front.textContent.replace(/<[^>]+>/g, ''));
        utterance.lang = 'en-GB';
        const voice = getBritishVoice();
        if (voice) {
          utterance.voice = voice;
        } else {
          const message = document.createElement('div');
          message.className = 'speech-message';
          message.textContent = 'No British voice available, using default voice.';
          document.querySelector('h1').after(message);
        }
        utterance.onerror = (event) => {
          console.error('Speech synthesis error:', event.error);
          const message = document.createElement('div');
          message.className = 'speech-message';
          message.textContent = 'Speech synthesis not supported or failed.';
          document.querySelector('h1').after(message);
        };
        utterance.onend = () => {
          document.querySelector('.continue-button').style.display = 'block';
        };
        window.speechSynthesis.speak(utterance);
        document.querySelector('.start-button').style.display = 'none';
      } else {
        const message = document.createElement('div');
        message.className = 'speech-message';
        message.textContent = 'Speech synthesis not supported in this browser.';
        document.querySelector('h1').after(message);
        document.querySelector('.start-button').style.display = 'none';
        document.querySelector('.continue-button').style.display = 'block';
      }
    }

    function toggleCard(card) {
      try {
        const front = card.querySelector('.flashcard-front');
        const back = card.querySelector('.flashcard-back');
        const punchline = card.querySelector('.punchline');
        if ('speechSynthesis' in window) {
          window.speechSynthesis.cancel();
        }
        front.classList.toggle('active');
        back.classList.toggle('active');
        card.setAttribute('aria-expanded', back.classList.contains('active'));
        if (back.classList.contains('active') && 'speechSynthesis' in window) {
          const utterance = new SpeechSynthesisUtterance(punchline.textContent.replace(/<[^>]+>/g, ''));
          utterance.lang = 'en-GB';
          const voice = getBritishVoice();
          if (voice) {
            utterance.voice = voice;
          } else {
            const message = document.createElement('div');
            message.className = 'speech-message';
            message.textContent = 'No British voice available, using default voice.';
            document.querySelector('h1').after(message);
          }
          utterance.onerror = (event) => {
            console.error('Speech synthesis error:', event.error);
          };
          utterance.onend = () => {
            document.querySelector('.continue-button').style.display = 'none';
          };
          window.speechSynthesis.speak(utterance);
        }
        adjustFontSize();
        const message = document.querySelector('.speech-message');
        if (message) message.remove();
      } catch (error) {
        console.error('Error toggling card:', error);
        card.querySelector('.flashcard-front').classList.remove('active');
        card.querySelector('.flashcard-back').classList.add('active');
        card.setAttribute('aria-expanded', 'true');
      }
    }

    function handleKeydown(event) {
      if (event.key === 'Enter' || event.key === ' ') {
        toggleCard(event.currentTarget);
        event.preventDefault();
      }
    }

    function adjustFontSize() {
      const card = document.querySelector('.flashcard.active');
      const back = card.querySelector('.flashcard-back');
      const padding = parseInt(getComputedStyle(card).paddingTop) * 2;
      const availableHeight = card.clientHeight - padding;
      let fontSize = parseFloat(getComputedStyle(back).fontSize);
      let minFontSize = 12;
      let maxFontSize = 18;
      let step = 0.25;
      while (back.scrollHeight > availableHeight && fontSize > minFontSize) {
        fontSize -= step;
        updateFontSizes(back, fontSize);
      }
      while (back.scrollHeight < availableHeight * 0.95 && fontSize < maxFontSize) {
        fontSize += step;
        updateFontSizes(back, fontSize);
      }
    }

    function updateFontSizes(back, fontSize) {
      back.style.fontSize = `${fontSize}px`;
      back.querySelector('.joke-setup').style.fontSize = `${fontSize * 0.9}px`;
      back.querySelector('.punchline').style.fontSize = `${fontSize * 1.15}px`;
      back.querySelector('.grammar-lesson').style.fontSize = `${fontSize * 0.85}px`;
    }

    let resizeTimeout;
    window.addEventListener('load', () => {
      // Ensure voices are loaded before starting
      window.speechSynthesis.onvoiceschanged = () => {
        updateCardDisplay();
      };
      updateCardDisplay();
      if (!('speechSynthesis' in window)) {
        document.querySelector('.start-button').style.display = 'none';
        document.querySelector('.continue-button').style.display = 'block';
      }
    });
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(adjustFontSize, 100);
    });
  </script>
</body>
</html>
